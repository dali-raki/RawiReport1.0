@if (isModalOpen)
{
    <div class="fixed inset-0 bg-gray-900 bg-opacity-60 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg shadow-lg w-full max-w-md p-6 relative">

            <div class="flex justify-between items-center mb-4">
                <h2 class="text-lg font-semibold">Add Machine Breakdown</h2>
                <button class="text-gray-500 hover:text-gray-700" @onclick="CloseModal">✕</button>
            </div>

            <EditForm Model="breakdown" OnValidSubmit="SaveBreakdown">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium mb-1">Machine</label>
                        <InputSelect @bind-Value="breakdown.MachineId" class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="0">Select Machine</option>
                            @foreach (var machine in Machines ?? Enumerable.Empty<RawiReport.Domains.Models.Machines.MachineModel>())
                            {
                                <option value="@machine.MachineId">@machine.MachineName</option>
                            }
                        </InputSelect>
                    </div>

                    <!-- Time Stop -->
                    <div>
                        <label class="block text-sm font-medium mb-1">Time Stop</label>
                        <input type="time" @bind-value="breakdown.StoppingTime" class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" />
                    </div>

                    <!-- Duration Stop -->
                    <div>
                        <label class="block text-sm font-medium mb-1">Duration Stop</label>
                        <InputText @bind-Value="breakdown.DurationStopping" placeholder="e.g., 2h 30m" class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" />
                    </div>

                    <!-- Error Code -->
                    <div>
                        <label class="block text-sm font-medium mb-1">Error Code</label>
                        <InputText @bind-Value="breakdown.Code" placeholder="e.g., E001" class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" />
                    </div>

                    <!-- Description -->
                    <div>
                        <label class="block text-sm font-medium mb-1">Description</label>
                        <InputTextArea @bind-Value="breakdown.Description" placeholder="Describe the breakdown..." class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" />
                    </div>

                    <!-- Buttons -->
                    <div class="flex justify-end space-x-2 mt-4">
                        <button type="button" class="px-4 py-2 rounded border border-gray-300 hover:bg-gray-100" @onclick="CloseModal">Cancel</button>
                        <button type="submit" class="px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700">Save Breakdown</button>
                    </div>
                </div>
            </EditForm>
        </div>
    </div>
}
